{% extends "blog/base.html" %}
{% load static %}
{% block title %}Share “{{ post.title }}”{% endblock %}

{% block content %}
  {% if sent %}
    <section class="panel panel--card">
      <div class="panel__head">
        <h1 class="panel__title">Email sent</h1>
        <p class="panel__sub">
          “{{ post.title }}” was sent to <strong>{{ form.cleaned_data.to }}</strong>.
        </p>
      </div>

      <div class="cform__actions">
        <a class="btn btn--primary" href="{{ post.get_absolute_url }}">Back to post</a>
        <a class="btn btn--soft" href="{% url 'blog:post_list' %}">Browse posts</a>
      </div>
    </section>

  {% else %}
    <section class="panel panel--card">
      <div class="panel__head">
        <h1 class="panel__title">Share this post </h1>
        <p class="panel__sub">
          You're sharing: <a class="link" href="{{ post.get_absolute_url }}">{{ post.title }}</a><br>
          <span aria-hidden="true">•</span>
          <time datetime="{{ post.publish|date:'c' }}">{{ post.publish|date:"M d, Y" }}</time></br>
        </p>
      </div>

      <form class="cform" method="post" novalidate>
        {% csrf_token %}

        {{ form.non_field_errors }}

        <div class="cform__grid">
          <div class="cform__field">
            {{ form.name.as_field_group }}
          </div>
          <div class="cform__field">
            {{ form.email.as_field_group }}
          </div>
        </div>

        <div class="cform__field cform__field--full">
          {{ form.to.as_field_group }}
        </div>

        <div class="cform__field cform__field--full">
          {{ form.comments.as_field_group }}
        </div>

        <div class="cform__actions">
          <button class="action-btn logout-btn" type="submit">Send email</button>
          <a class="action-btn toggle-btn" href="{{ post.get_absolute_url }}">Cancel</a>
        </div>
      </form>
    </section>
  {% endif %}
{% endblock %}